<infinispan
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:infinispan:config https://infinispan.org/schemas/infinispan-config-14.0.xsd
            urn:infinispan:server https://infinispan.org/schemas/infinispan-server-14.0.xsd
            urn:org:jgroups http://www.jgroups.org/schema/jgroups-5.2.xsd"
        xmlns="urn:infinispan:config:14.0"
        xmlns:ispn="urn:infinispan:config:14.0"
        xmlns:server="urn:infinispan:server:14.0">

    <jgroups>
        <!--        <stack-file name="my-stack" path="jgroups-udp.xml" />-->
        <stack name="my-stack" extends="udp">
            <relay.RELAY2 xmlns="urn:org:jgroups"
                          site="my-site"
                          max_site_masters="1000"/>
            <!-- inter communication between nodes of sites -->
            <remote-sites default-stack="tcp">
                <remote-site name="my-site"/>
            </remote-sites>
        </stack>

    </jgroups>
    <cache-container default-cache="local-cache" statistics="true">
        <transport cluster="my-cluster" stack="my-stack"/>
        <local-cache name="local-cache" statistics="true">
            <encoding media-type="application/x-protostream"/>
            <expiration lifespan="-1" max-idle="1800000"/>
            <memory when-full="REMOVE" max-count="2048"/>
        </local-cache>
        <distributed-cache name="dist-cache" mode="SYNC" owners="2" statistics="true">
            <encoding media-type="application/x-protostream"/>
            <locking isolation="READ_COMMITTED"/>
            <transaction mode="FULL_XA" locking="PESSIMISTIC"
                         transaction-manager-lookup="org.infinispan.transaction.lookup.EmbeddedTransactionManagerLookup"/>
            <expiration lifespan="-1" max-idle="1800000"/>
<!--            <persistence passivation="false">-->
<!--                <file-store shared="false" purge="false" path="./dist-cache">-->
<!--&lt;!&ndash;                    <write-behind modification-queue-size="2048"/>&ndash;&gt;-->
<!--                    <index path="../cache/index"/>-->
<!--                    <data path="../cache/data"/>-->
<!--                </file-store>-->
<!--            </persistence>-->

<!--            <memory when-full="REMOVE"/>-->
            <groups enabled="true" />
        </distributed-cache>
        <replicated-cache name="rep-cache" mode="SYNC" >
            <encoding media-type="application/x-protostream"/>
            <locking isolation="READ_COMMITTED"/>
            <transaction mode="NON_XA" locking="PESSIMISTIC"
                         transaction-manager-lookup="org.infinispan.transaction.lookup.EmbeddedTransactionManagerLookup"/>
            <expiration lifespan="-1" max-idle="1800000"/>
<!--            <persistence passivation="false">-->
<!--                <file-store shared="false" purge="false" path="./rep-cache">-->
<!--&lt;!&ndash;                    <write-behind modification-queue-size="2048"/>&ndash;&gt;-->
<!--                    <index path="../cache/index"/>-->
<!--                    <data path="../cache/data"/>-->
<!--                </file-store>-->
<!--            </persistence>-->
        </replicated-cache>

    </cache-container>
</infinispan>
